# 플로라(Flora) 브랜드 공식몰 AC & Edge Case

## 문서 정보

| 항목 | 내용 |
|------|------|
| 프로젝트 | 플로라(Flora) 브랜드 공식몰 구축 |
| 작성일 | 2025-12-29 |
| 작성자 | LUKUKU (이은재 PM) |
| 관련 문서 | 기능정의서.md |

---

## 1. Acceptance Criteria (AC)

> Given-When-Then 형식으로 테스트 통과 기준 정의

### 1.1 소셜 로그인 (F-003)

**AC-001**: 카카오 로그인 - 신규 회원
```
Given: 사용자가 카카오 계정을 가지고 있고, 플로라 회원이 아닌 상태
When: "카카오로 시작하기" 버튼을 클릭하고 카카오 인증을 완료하면
Then: 자동으로 회원가입되고, "일반" 등급으로 설정되며, 신규가입 10% 쿠폰이 발급된다
```

**AC-002**: 카카오 로그인 - 기존 회원
```
Given: 사용자가 카카오 계정으로 이미 플로라 회원인 상태
When: "카카오로 시작하기" 버튼을 클릭하고 카카오 인증을 완료하면
Then: 기존 회원 정보로 로그인되고, 이전 페이지로 리다이렉트된다
```

**AC-003**: 네이버 로그인 - 신규 회원
```
Given: 사용자가 네이버 계정을 가지고 있고, 플로라 회원이 아닌 상태
When: "네이버로 시작하기" 버튼을 클릭하고 네이버 인증을 완료하면
Then: 자동으로 회원가입되고, "일반" 등급으로 설정되며, 신규가입 10% 쿠폰이 발급된다
```

---

### 1.2 회원 등급제 (F-004)

**AC-004**: 일반 → 그린멤버 자동 승급
```
Given: "일반" 등급 회원이 누적 구매금액 8만원인 상태
When: 2만원 이상 주문을 완료하면 (총 10만원 이상 달성)
Then: 자동으로 "그린멤버" 등급으로 승급되고, 승급 알림톡이 발송된다
```

**AC-005**: 그린멤버 → VIP 자동 승급
```
Given: "그린멤버" 등급 회원이 누적 구매금액 28만원인 상태
When: 2만원 이상 주문을 완료하면 (총 30만원 이상 달성)
Then: 자동으로 "VIP" 등급으로 승급되고, 승급 알림톡이 발송된다
```

**AC-006**: 등급별 적립률 적용
```
Given: 그린멤버 등급 회원이 5만원 상품을 구매하는 상태
When: 결제를 완료하면
Then: 주문 금액의 2% (1,000원)가 적립금으로 적립된다
```

---

### 1.3 적립금 시스템 (F-005)

**AC-007**: 적립금 사용
```
Given: 회원이 3,000원의 적립금을 보유하고, 5만원 상품을 결제하는 상태
When: 적립금 3,000원을 사용하고 결제하면
Then: 실 결제금액은 47,000원이 되고, 잔여 적립금은 0원이 된다
```

**AC-008**: 적립금 최대 사용 제한
```
Given: 회원이 30,000원의 적립금을 보유하고, 5만원 상품을 결제하는 상태
When: 적립금을 사용하려고 하면
Then: 결제 금액의 최대 10% (5,000원)까지만 사용 가능하다
```

**AC-009**: 리뷰 작성 적립금
```
Given: 회원이 배송 완료된 상품의 포토 리뷰를 작성하는 상태
When: 리뷰 작성을 완료하면
Then: 1,000원의 적립금이 즉시 지급되고, 마이페이지에서 확인 가능하다
```

---

### 1.4 정기구독 (F-008)

**AC-010**: 구독 시작
```
Given: 사용자가 정기구독 상품 페이지에서 4주 주기를 선택한 상태
When: "구독 시작하기" 버튼을 클릭하고 결제를 완료하면
Then: 구독이 시작되고, 마이페이지 > 구독 관리에서 확인 가능하다
```

**AC-011**: 구독 3회차 할인 적용
```
Given: 회원이 정기구독 3회차 결제 예정인 상태
When: 구독 결제가 진행되면
Then: 기본 가격에서 10% 할인된 금액으로 결제된다
```

**AC-012**: 구독 일시정지
```
Given: 회원이 활성 구독 중인 상태
When: 마이페이지에서 "구독 일시정지" 버튼을 클릭하면
Then: 다음 결제가 건너뛰어지고, 구독 상태가 "일시정지"로 변경된다
```

**AC-013**: 구독 해지
```
Given: 회원이 활성 구독 중인 상태
When: 마이페이지에서 "구독 해지" 버튼을 클릭하고 확인하면
Then: 구독이 해지되고, 다음 결제가 진행되지 않는다 (페널티 없음)
```

---

### 1.5 주문/결제 (F-007)

**AC-014**: 무료배송 적용
```
Given: 장바구니에 총 3만원 이상의 상품이 담긴 상태
When: 체크아웃 페이지로 이동하면
Then: 배송비가 0원으로 표시되고, "무료배송" 문구가 노출된다
```

**AC-015**: VIP 무료배송
```
Given: VIP 등급 회원이 2만원 상품을 결제하는 상태
When: 체크아웃 페이지로 이동하면
Then: 금액 무관하게 배송비가 0원으로 표시된다
```

**AC-016**: 희망 배송일 선택
```
Given: 사용자가 생화 상품을 포함하여 결제하는 상태
When: 체크아웃 페이지에서 희망 배송일을 선택하면
Then: 화요일 또는 목요일 중 선택 가능하고, 선택한 날짜에 배송된다
```

**AC-017**: 결제 완료
```
Given: 사용자가 배송 정보를 입력하고 결제 수단을 선택한 상태
When: "결제하기" 버튼을 클릭하고 결제가 성공하면
Then: 주문 완료 페이지로 이동하고, 주문 확인 알림톡이 발송된다
```

---

## 2. Edge Case Matrix

> 예외 상황과 처리 방안 정의

### 2.1 소셜 로그인 Edge Cases

| ID | 상황 | 처리 방안 | 메시지 |
|----|------|----------|--------|
| E-001 | 카카오 인증 취소 | 로그인 페이지로 복귀 | "로그인이 취소되었습니다" |
| E-002 | 카카오 서버 오류 | 재시도 안내 | "일시적인 오류가 발생했습니다. 잠시 후 다시 시도해주세요" |
| E-003 | 카카오 이메일 정보 없음 | 이메일 입력 페이지로 이동 | "이메일 주소를 입력해주세요" |
| E-004 | 동일 이메일로 다른 소셜 가입 존재 | 기존 계정 안내 | "이미 네이버로 가입된 이메일입니다" |

### 2.2 회원 등급 Edge Cases

| ID | 상황 | 처리 방안 | 메시지 |
|----|------|----------|--------|
| E-005 | 주문 취소 시 등급 영향 | 취소 금액 차감, 등급 재계산 | (내부 처리, 사용자 알림 없음) |
| E-006 | 환불 시 등급 영향 | 환불 금액 차감, 등급 재계산 | (내부 처리, 사용자 알림 없음) |
| E-007 | 등급 강등 조건 | 1년 내 구매 없으면 일반으로 리셋 | "회원 등급이 변경되었습니다" |

### 2.3 적립금 Edge Cases

| ID | 상황 | 처리 방안 | 메시지 |
|----|------|----------|--------|
| E-008 | 적립금보다 결제금액 작음 | 결제금액 한도 내에서만 사용 | "적립금은 결제금액 이하로 사용 가능합니다" |
| E-009 | 주문 취소 시 적립금 처리 | 사용한 적립금 환원 | "사용하신 적립금이 환원되었습니다" |
| E-010 | 적립금 유효기간 만료 | 만료 7일 전 알림, 만료 후 소멸 | "적립금 OOO원이 곧 만료됩니다" |

### 2.4 정기구독 Edge Cases

| ID | 상황 | 처리 방안 | 메시지 |
|----|------|----------|--------|
| E-011 | 구독 결제 실패 (잔액 부족) | 3일 후 재시도, 2회 실패 시 일시정지 | "결제가 실패했습니다. 결제 수단을 확인해주세요" |
| E-012 | 구독 상품 품절 | 고객 연락 후 대체 상품 협의 | "이번 회차 상품이 품절되어 연락드립니다" |
| E-013 | 구독 배송 주소 변경 | 다음 회차부터 적용 | "다음 배송부터 변경된 주소로 발송됩니다" |
| E-014 | 구독 중 해외 체류 | 일시정지 기능 안내 | "구독을 일시정지하시겠습니까?" |

### 2.5 장바구니 Edge Cases

| ID | 상황 | 처리 방안 | 메시지 |
|----|------|----------|--------|
| E-015 | 품절 상품 담기 시도 | 담기 차단 | "선택하신 옵션은 품절입니다" |
| E-016 | 장바구니 상품 품절 전환 | 품절 표시, 결제 제외 | "일부 상품이 품절되어 결제에서 제외됩니다" |
| E-017 | 재고보다 많은 수량 선택 | 재고 수량으로 제한 | "재고가 O개 남았습니다" |
| E-018 | 비회원 장바구니 → 로그인 | 장바구니 병합 | "장바구니에 담긴 상품이 유지됩니다" |

### 2.6 결제/배송 Edge Cases

| ID | 상황 | 처리 방안 | 메시지 |
|----|------|----------|--------|
| E-019 | 결제 중 세션 만료 | 로그인 후 장바구니 복원 | "다시 로그인해주세요" |
| E-020 | 결제 실패 (잔액 부족) | 결제 페이지 유지, 재시도 안내 | "결제에 실패했습니다. 다른 결제 수단을 선택해주세요" |
| E-021 | PG사 오류 | 재시도 안내 | "결제 시스템 오류가 발생했습니다" |
| E-022 | 생화 배송 불가 지역 | 결제 차단 | "생화 상품은 제주/도서산간 지역으로 배송이 불가합니다" |
| E-023 | 희망 배송일 미선택 | 결제 버튼 비활성화 | "배송일을 선택해주세요" |

### 2.7 쿠폰 Edge Cases

| ID | 상황 | 처리 방안 | 메시지 |
|----|------|----------|--------|
| E-024 | 최소 주문금액 미충족 | 쿠폰 적용 차단 | "이 쿠폰은 3만원 이상 구매 시 사용 가능합니다" |
| E-025 | 쿠폰 유효기간 만료 | 적용 차단, 만료 표시 | "만료된 쿠폰입니다" |
| E-026 | 주문 취소 시 쿠폰 복원 | 쿠폰 재발급 (유효기간 내) | "사용하신 쿠폰이 복원되었습니다" |

---

## 3. 전체 AC 요약

| ID | 기능 | Given | When | Then |
|----|------|-------|------|------|
| AC-001 | 카카오 로그인 (신규) | 비회원 | 카카오 인증 완료 | 자동 가입, 일반 등급, 쿠폰 발급 |
| AC-004 | 등급 승급 | 10만원 달성 | 주문 완료 | 그린멤버 자동 승급 |
| AC-007 | 적립금 사용 | 적립금 보유 | 결제 시 적용 | 실 결제금액 차감 |
| AC-010 | 구독 시작 | 구독 상품 선택 | 결제 완료 | 구독 활성화 |
| AC-011 | 구독 할인 | 3회차 이상 | 결제 시 | 10% 할인 적용 |
| AC-014 | 무료배송 | 3만원 이상 | 체크아웃 이동 | 배송비 0원 |
| AC-016 | 희망 배송일 | 생화 포함 | 배송일 선택 | 화/목 선택 가능 |

---

## 4. 전체 Edge Case 요약

| ID | 기능 | 상황 | 처리 |
|----|------|------|------|
| E-001 | 소셜 로그인 | 인증 취소 | 로그인 페이지 복귀 |
| E-011 | 정기구독 | 결제 실패 | 3일 후 재시도 |
| E-012 | 정기구독 | 상품 품절 | 고객 연락 후 대체 협의 |
| E-015 | 장바구니 | 품절 상품 담기 | 담기 차단, 안내 메시지 |
| E-022 | 결제 | 생화 배송 불가 지역 | 결제 차단 |
| E-023 | 결제 | 배송일 미선택 | 결제 버튼 비활성화 |

---

**END OF DOCUMENT**
